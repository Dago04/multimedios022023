<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Listar Datos</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
  </head>

  <body>
    <div class="container-fluid">
      <header>
        <div  id="navbarID"></div>
       
      </header>

      <main>
        <div class="table-responsive">
          <table
            class="table table-striped table-hover table-borderless table-primary align-middle"
          >
            <thead class="table-light">
              <caption>
                Table Name
              </caption>
              <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Descripcion</th>
                <th>Tiempo</th>
                <th>Usuario</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody class="table-group-divider" id="resultados">
             
            </tbody>
            <tfoot></tfoot>
          </table>
        </div>

        <div
          class="modal fade"
          id="modalId"
          tabindex="-1"
          data-bs-backdrop="static"
          data-bs-keyboard="false"
          role="dialog"
          aria-labelledby="modalTitleId"
          aria-hidden="true"
        >
          <div
            class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-sm"
            role="document"
          >
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalTitleId">Modal title</h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">Body</div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button type="button" class="btn btn-primary">Save</button>
              </div>
            </div>
          </div>
        </div>
      </main>

      <footer></footer>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
      crossorigin="anonymous"
    ></script>

    <script src="menu.js"></script>

    <script>
      const myModal = new bootstrap.Modal(document.getElementById("modalId"));
      //declaracion de variables u objetos
     
      var contenidoTablaResultado = document.querySelector("#resultados");

      // {"id":"377","nombre":"hola leo","descripcion":"sdsd","tiempo":"asasa"}
      function cargarDatos() {
        fetch("https://paginas-web-cr.com/ApiPHP/apis/ListaCurso.php") //url de peticion  de datos
          .then((respuesta) => respuesta.json()) //recibe los datos en formato json
          .then((datosrespuesta) => {
            setTabla(datosrespuesta.data); //lo envio para la funcion para darle tratamiento
            //console.log('Datos',datosrespuesta.data)//muesta el resultado de la petici√≥n
          })

          .catch(console.log); //muestra
      }

      function setTabla(datos) {
        console.log("datos", datos);
        //contenidoTablaResultado.innerHTML='test'
        //alt 96 comilla invertida

        for (const valor of datos) {
          console.log("valor: ", valor);
          contenidoTablaResultado.innerHTML += `
           
                         <tr class="table-primary" >
                            <td scope="row">${valor.id}</td>
                            <td>${valor.nombre}</td>
                            <td>${valor.descripcion}</td>
                            <td>${valor.tiempo}</td>
                            <td>${valor.usuario}</td>
                            <td>
                              <button type="submit" onclick="aviso()"class="btn btn-danger">Borrar</button>
                              <button type="submit" onclick="mostrar()" class="btn btn-primary">Editar</button>
                            </td>
                            
                        </tr>`;
        }
      }
      cargarDatos();

      //funcion para mandar un mensaje al apretar el boton de eliminar
      function aviso() {
        alert("Eliminado");
      }

      function mostrar() {
        myModal.show();
      }
    </script>
  </body>
</html>
